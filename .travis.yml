language: python
python:
  - "3.9.7"

install:
  - pip install -r requirements.txt

before_script:
  - python manage.py makemigrations
  - python manage.py migrate
  - python -m pip install flake8

script:
  - python manage.py test
  - black --check .
  - flake8 --exclude doghub_app/migrations

deploy:
  provider: elasticbeanstalk
  access_key_id:
    secure: "LRCqY01dqQAb+NU0CGWYVEkRaN2XtNI2+rx0gTf/N+DLXxY5x+PW2lyTmppvFCDfcS2o45BjehVOPsIMZhpv5po/Mzrb9+prh9iDit0igQvW3CEFmLZ9+fMN39AIiL62aPADNePtISvpgiFD0tW6VpPQwpf6Eghw4Bk4S6wclm5r/7jKypFAbG7vwVsRPUmoc3F4mnUhTNZeskkLtZQEWRmnNjE+NB5vroq2AikfCHiFERR4XrDh06cWviPeKujki9pyfSbokz+0I1+ju2suBgC9nbWv9PHbtGX5IaE8NGKwwroJB0Y8+SA5v06PsbHsMdEjIH0+GwnpYu2SghijzTMTgBg396azh7apUFnTqq9AXL9Z4hgpfallB8UmL6fTkTN/oJMDcSYL4j92xxxx3qhMLN50XRYN1RM1HxruhCTRRSpCDz5ZcwVoUVqByGqVEhUZBACwVVwwGYG1YLyx3PFqOEHKWs+mgmKo0LkpPqxknzDB5MuYID8u6pRpcHo1bRaIsvHqCQINxPD70Am/HgDTXzdYL0DRTha6t/zFzM22qaUCUWiFlVCpppQ7klMEavFJG5V6LvUdazBNFbHpbvJWd3q5qHQxXBZ09b3ZQ6XscKbtQWtGWA0QE6208NuKZuoxTCHYOpvKlIWDP+IbGUjWL32T5un4iRpgVkO3FeE="
  secret_access_key:
    secure: "pHM7SvNvhnHmUKBnpJ2Hm8CiZh3AtWHJOArNLOaBkO/9NAhhyINAIsgo/2ksRloHFrjilX1WxdE8kdd7i6O7o6N2Pt7LIur3i4PYe31MoLOv9vQ0xmuj0782q6sd2MWOepIPFoWspPdvg+ihyCkLSGtfT2aMJ4cxfM19G+4P23NmQ7rTblRCmyG3DpzdKKhFN+Iifu36eOChBLb+HqdNzhOG4ZtWnnnwsrprMbi7EBOs+gz0Dzc31wrL9+/0aY7T8JWAyQHPn6IHH06vQSaEfjQvu10m5B5mnyMB+OWO8Px+Nlhx09/Txpw8wHU1bKpqFl1fdmWi/2vE3Q7W22knkKi5ZtnZjYUUqI8tSfVErAmX1lIpEVIydUy+LwXknQfUWgrNl8EdK8kPnWrXCby45uC603KqwVZyIiMzvsBZKzG3MTPpE2byBts1SXymolkYYokFqqwxvTg9DKZicTDaSpr72O2grSQbxnwS6TfaObEqrDuVzxRE4zQrv4C6L12SgSslqqoeVaGox7A2U5jK1SkFyDyWq9VSB14SlUjVt9wcD7cVF8UTjPZ00uKkdaHJbGti4uHvs+ifm9T5/21PWi/BYlKq++YMauAl0IQg/Q6/n6TGPIAr3jMC1cxjviEAErFDEGjSKUSMBNkt/hyaG3I5dLyai8IfoFvcm+xSUMg="
  region: "us-west-2"
  app: "django-tutorial"
  env: "doghub-develop-env"
  bucket_name: "elasticbeanstalk-us-west-2-730437625654"
  on:
    repo: gcivil-nyu-org/INET-Monday-Spring2023-Team-1
    branch:
      - develop

after_deploy:
  - rm db.sqlite3
